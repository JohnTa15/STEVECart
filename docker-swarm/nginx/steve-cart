server { #redirect HTTP to HTTPS
 listen 80;
 server_name steve-cart.ydns.eu;
 return 301 https://$host$request_uri;
}
	

server {
	listen 443 ssl;
	http2 on;
	server_name steve-cart.ydns.eu;
	
	#ssl_certificate
	#ssl_certificate_key
	
	location /grafana {
		proxy_pass http://192.168.10.15:3000;
		proxy_set_header Host $http_host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forward-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forward-Proto $scheme;
		proxy_set_header Upgrade $http_upgrade;
		proxy_request_buffering off;
	}
	
	location /influxdb {
		proxy_pass http://192.168.10.15:8085;
		proxy_set_header Host $http_host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forward-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forward-Proto $scheme;
		proxy_set_header Upgrade $http_upgrade;
		proxy_request_buffering off;
	}
	
	location /redis-m {
		proxy_pass http://192.168.10.15:6378;
		proxy_set_header Host $http_host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forward-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forward-Proto $scheme;
		proxy_set_header Upgrade $http_upgrade;
		proxy_request_buffering off;
	}
	
	location /redis-m1 {
		proxy_pass http://192.168.10.15:6379;
		proxy_set_header Host $http_host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forward-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forward-Proto $scheme;
		proxy_set_header Upgrade $http_upgrade;
		proxy_request_buffering off;
	}
	
	location /redis-m2 {
		proxy_pass http://192.168.10.15:6380;
		proxy_set_header Host $http_host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forward-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forward-Proto $scheme;
		proxy_set_header Upgrade $http_upgrade;
		proxy_request_buffering off;
	}
	
	location /redis-s {
		proxy_pass http://192.168.10.15:26378;
		proxy_set_header Host $http_host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forward-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forward-Proto $scheme;
		proxy_set_header Upgrade $http_upgrade;
		proxy_request_buffering off;
	}
	
	location /redis-s1 {
		proxy_pass http://192.168.10.15:26379;
		proxy_set_header Host $http_host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forward-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forward-Proto $scheme;
		proxy_set_header Upgrade $http_upgrade;
		proxy_request_buffering off;
	}
	
	location /redis-s2 {
		proxy_pass http://192.168.10.15:26380;
		proxy_set_header Host $http_host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forward-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forward-Proto $scheme;
		proxy_set_header Upgrade $http_upgrade;
		proxy_request_buffering off;
	}
	